jQuery.ajaxSetup({cache:!1}),function($){$.fn.slideFade=function(e,a){for(var t,o=0;o<arguments.length;o++)if("number"==typeof arguments[o])t=arguments[o];else var l=arguments[o];t||(t=500),this.animate({opacity:"toggle",height:"toggle"},t,function(){"function"!=typeof l&&(l=function(){}),l.call(this)})}}(jQuery),function($){$.fn.plusGallery=function(e){var a=this;if(0===a.length)return!1;var t={imagePath:"images/plusgallery",type:null,albumTitle:!1,albumLimit:16,limit:30,apiKey:"",exclude:null,include:null,imageData:null,imgArray:[],titleArray:[],t:"",idx:0,imgCount:0,imgTotal:0,winWidth:1024,touch:!1,titleText:"",init:function(){var e=$(document);"ontouchstart"in document.documentElement&&(window.scrollTo(0,1),t.touch=!0),t.winWidth=$(window).width(),$("#pgzoomview").remove(),e.off("click",".pgalbumlink, #pgthumbhome, .pgthumb, .pgzoomarrow, .pgzoomclose, #pgzoomview, #pgzoomslide, .pgzoomimg"),t.getDataAttr(),t.writeHTML(),null!==t.albumId||"instagram"==t.type||"local"==t.type&&!t.imageData.hasOwnProperty("albums")?t.loadSingleAlbum():"local"==t.type?t.parseAlbumData(t.imageData):t.loadAlbumData(),e.on("click",".pgalbumlink",function(e){e.preventDefault(),$(this).append('<span class="pgloading"></span>');var a=$(this).children("span").html();if("local"==t.type){var o=$(this).attr("data-album-index").replace("http://","").replace("//","").replace("https://","");t.parseData(t.imageData.albums[o],a)}else{var l=this.href;t.loadGallery(l,a)}}),e.on("click","#pgthumbhome",function(e){e.preventDefault(),$("#pgthumbview").slideFade(700),$("#pgalbums").slideFade(700)}),e.on("click",".pgthumb",function(e){e.preventDefault();var a=$(".pgthumb").index(this);t.loadZoom(a)}),e.on("click",".pgzoomarrow",function(e){e.preventDefault();var a=this.rel;return t.prevNext(a),!1}),e.on("click",".pgzoomclose",function(e){e.preventDefault(),t.unloadZoom()}),e.on("click","#pgzoomview",function(e){e.preventDefault(),t.unloadZoom()}),e.on("click","#pgzoomslide",function(){t.unloadZoom()}),e.on("click",".pgzoomimg",function(){return $(this).attr("id").replace("pgzoomimg","")<t.imgTotal-1&&t.prevNext("next"),!1}),clearTimeout(t.t)},getDataAttr:function(){var e=a.attr("data-type");if(null==t.type&&e)t.type=e;else if(null==t.type)throw"You must enter a data type.";if(e=a.attr("data-userid"))t.userId=e;else if("local"!=t.type)throw"You must enter a valid User ID";e=a.attr("data-limit"),e&&(t.limit=e),e=a.attr("data-album-limit"),e&&(t.albumLimit=e),e=a.attr("data-exclude"),e&&(t.exclude=e.split(",")),e=a.attr("data-include"),e&&(t.include=e.split(",")),e=a.attr("data-api-key"),e&&(t.apiKey=e),e=a.attr("data-access-token"),e&&(t.accessToken=e),e=a.attr("data-album-id"),e&&(t.albumId=e,titleAttr=a.attr("data-album-title"),t.albumTitle="true"==titleAttr?!0:!1),e=a.attr("data-credit"),"false"==e&&(t.credit=!1),e=a.attr("data-image-path"),e&&(t.imagePath=e),e=a.attr("data-image-data"),e&&(t.imageData=JSON.parse(e))},writeHTML:function(){var e;t.touch?(e="touch",a.addClass("touch")):(e="no-touch",a.addClass("no-touch")),a.append('<ul id="pgalbums" class="clearfix"></ul><div id="pgthumbview"><ul id="pgthumbs" class="clearfix"></ul></div>'),$("body").prepend('<div id="pgzoomview" class="pg '+e+'"><a href="#" rel="previous" id="pgzoomclose" title="Close">Close</a><a href="#" rel="previous" id="pgprevious" class="pgzoomarrow" title="previous">Previous</a><a href="#" rel="next" id="pgnext" class="pgzoomarrow" title="Next">Next</a><div id="pgzoomscroll"><ul id="pgzoom"></ul></div></div>'),a.addClass("pg"),t.credit===!0&&a.append('<div id="pgcredit"><a href="http://www.plusgallery.net" target="_blank" title="Powered by +GALLERY"><span>+</span>Gallery</a></div>'),t.albumTitle===!0&&$("#pgthumbview").prepend('<ul id="pgthumbcrumbs" class="clearfix"><li id="pgthumbhome">&laquo;</li></ul>')},parseAlbumData:function(e){a.addClass("loaded");var o,l,i,r,s;switch(t.type){case"google":if(o=e.feed.entry,l=o.length,l>t.albumLimit&&(l=t.albumLimit),!(l>0))throw"There are either no results for albums with this user ID or there was an error loading the data. \n"+s;$.each(o,function(e,a){l>e&&(r=a.title.$t,s=a.link[0].href,i=a.media$group.media$thumbnail[0].url,i=i.replace("s160","s210"),t.loadAlbums(r,i,s,e))});break;case"flickr":if(o=e.photosets.photoset,l=o.length,l>t.albumLimit&&(l=t.albumLimit),!(l>0))throw"There are either no results for albums with this user ID or there was an error loading the data. \n"+s;$.each(o,function(e,a){l>e&&(r=a.title._content,i="https://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.primary+"_"+a.secret+"_n.jpg",s="https://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+t.apiKey+"&photoset_id="+a.id+"=&format=json&jsoncallback=?",t.loadAlbums(r,i,s))});break;case"facebook":if(o=e.data,l=o.length,l>t.albumLimit&&(l=t.albumLimit),!(l>0))throw"There are either no results for albums with this user ID or there was an error loading the data. \n"+albumURL;$.each(o,function(e,a){l>e&&(r=a.name,s="https://graph.facebook.com/"+a.id+"/photos?limit="+t.limit+"&access_token="+t.accessToken,i="http://graph.facebook.com/"+a.id+"/picture?type=album",t.loadAlbums(r,i,s))});break;case"local":if(o=e.albums,l=o.length,l>t.albumLimit&&(l=t.albumLimit),!(l>0))throw"There are no albums available in the specified JSON.";$.each(o,function(e,a){l>e&&(r=a.title,i=a.images[0].th,s="http://"+e,t.loadAlbums(r,i,s))})}},loadAlbumData:function(){var e;switch(t.type){case"google":e="https://picasaweb.google.com/data/feed/base/user/"+t.userId+"?alt=json&kind=album&hl=en_US&max-results="+t.albumLimit+"&callback=?";break;case"flickr":e="https://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key="+t.apiKey+"&user_id="+t.userId+"&format=json&jsoncallback=?";break;case"facebook":e="https://graph.facebook.com/"+t.userId+"/albums?limit="+t.albumLimit+"&access_token="+t.accessToken+"&callback=?";break;case"instagram":e=null;break;case"local":e=null;break;default:throw"Please define a gallery type."}$.getJSON(e,function(e){t.parseAlbumData(e)})},loadAlbums:function(e,a,o){var l=!0,i;null!==t.exclude&&$.each(t.exclude,function(e,a){o.indexOf(a)>0&&(l=!1)}),null!==t.include&&(l=!1,$.each(t.include,function(e,a){o.indexOf(a)>0&&(l=!0)})),l&&(i="facebook"==t.type||"flickr"==t.type?'<img src="'+t.imagePath+'/square.png" style="background-image: url('+a+');" title="'+e+'" title="'+e+'" class="pgalbumimg">':'<img src="'+a+'" title="'+e+'" title="'+e+'" class="pgalbumimg">',$("#pgalbums").append("local"==t.type?'<li class="pgalbumthumb"><a href="#" data-album-index="'+o+'" class="pgalbumlink">'+i+'<span class="pgalbumtitle">'+e+'</span><span class="pgplus">+</span></a></li>':'<li class="pgalbumthumb"><a href="'+o+'" class="pgalbumlink">'+i+'<span class="pgalbumtitle">'+e+'</span><span class="pgplus">+</span></a></li>'))},loadSingleAlbum:function(){var e;switch(t.type){case"google":e="https://picasaweb.google.com/data/feed/base/user/"+t.userId+"/albumid/"+t.albumId+"?alt=json&hl=en_US",t.loadGallery(e);break;case"flickr":e="https://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+t.apiKey+"&photoset_id="+t.albumId+"=&format=json&jsoncallback=?",t.loadGallery(e);break;case"facebook":e="https://graph.facebook.com/"+t.albumId+"/photos?limit="+t.limit+"&access_token="+t.accessToken,t.loadGallery(e);break;case"instagram":e="https://api.instagram.com/v1/users/"+t.userId+"/media/recent/?access_token="+t.accessToken+"&count="+t.limit,t.loadGallery(e);break;case"local":t.parseData(t.imageData)}a.addClass("loaded"),$("#pgthumbhome").hide()},loadGallery:function(e,a){t.imgArray=[],t.titleArray=[],$("#pgzoom").empty(),$.ajax({url:e,cache:!1,dataType:"jsonp",success:function(e){t.parseData(e,a)},error:function(e,a,t){console.log("Error: \njqXHR:"+e+"\ntextStatus: "+a+"\nerrorThrown: "+t)}})},parseData:function(e,a){var o,l,i,r,s="",n=0,c,m;switch($(".crumbtitle").remove(),$("#pgthumbs").empty(),void 0===a&&(a="&nbsp;"),$("#pgthumbcrumbs").append('<li class="crumbtitle">'+a+"</li>"),t.type){case"google":objPath=e.feed.entry;break;case"flickr":objPath=e.photoset.photo;break;case"facebook":objPath=e.data;break;case"instagram":objPath=e.data;break;case"local":objPath=e.images}if(t.imgTotal=objPath.length,t.limit<t.imgTotal&&(t.imgTotal=t.limit),0===t.imgTotal)throw"Please check your photo permissions,\nor make sure there are photos in this gallery.";t.winWidth>1100?(c=1024,m="_b"):t.winWidth>620?(c=768,m="_b"):(c=540,m="_z"),$.each(objPath,function(e,a){if(e<t.limit){switch(t.type){case"google":l=a.title.$t,i=a.media$group.media$content[0].url;var o=i.lastIndexOf("/"),u=i.substring(o);i=i.replace(u,"/s"+c+u),r=a.media$group.media$thumbnail[1].url,r=r.replace("s144","s160-c");break;case"flickr":l=a.title,i="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+m+".jpg",r="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_z.jpg";break;case"facebook":l=a.name,i=a.images[1].source,r=t.imagePath+"/square.png",s=' style="background: url('+a.images[3].source+') no-repeat 50% 50%; background-size: cover;"';break;case"instagram":null!==a.caption&&(l=a.caption.text),i=a.images.standard_resolution.url,r=a.images.low_resolution.url;break;case"local":null!==a.caption&&(l=a.caption),i=a.src,r=a.th}l||(l=""),t.imgArray[e]=i,t.titleArray[e]=l,$("#pgthumbs").append('<div class="pgthumb col-xs-12 col-sm-4 col-md-3 col-lg-3 frame"><div class="box"><a href="'+i+'"><img src="'+r+'" id="pgthumbimg'+e+'" class="pgthumbimg" alt="'+l+'" title="'+l+'"'+s+"></a></div></div>"),$("#pgthumbimg"+e).load(function(){n++,n==t.imgTotal&&($("#pgalbums").slideFade(700,function(){$(".pgalbumthumb .pgloading").remove()}),$("#pgthumbview").slideFade(700))})}})},zoomIdx:null,zoomImagesLoaded:[],zoomScrollDir:null,zoomScrollLeft:0,loadZoom:function(e){t.zoomIdx=e,t.winWidth=$(window).width();var a=$("#pgzoomview"),o=$("#pgzoomscroll"),l=$("#pgprevious"),i=$("#pgnext"),r=$("#pgzoom"),s="",n=t.imgArray.length;a.addClass("fixed"),0===e&&l.hide(),e==n-1&&i.hide();var c=t.imgArray.length*t.winWidth;$("#pgzoom").width(c);var m=parseInt(e*t.winWidth);a.fadeIn(function(){$(window).on("resize",t.resizeZoom),$.each(t.imgArray,function(a){s=s+'<li class="pgzoomslide loading" id="pgzoomslide'+a+'" style="width: '+t.winWidth+'px;"><img src="'+t.imagePath+'/square.gif" class="pgzoomspacer"><div class="share"><a href="#"><button type="button" class="btn btn-default">Share</button></a></div><span class="pgzoomcaption">'+t.titleArray[a]+"</span></li>",a+1==t.imgArray.length&&($("#pgzoom").html(s),t.zoomKeyPress(),$("#pgzoomscroll").scrollLeft(m),t.zoomScrollLeft=m,t.loadZoomImg(e),t.zoomScroll(),e-1>=0&&t.loadZoomImg(e-1),e+1<t.imgArray.length&&t.loadZoomImg(e+1))})})},loadZoomImg:function(e){0===$("#pgzoomimg"+e).length&&($("#pgzoomslide"+e+" .pgzoomspacer").after('<img src="'+t.imgArray[e]+'" data-src="'+t.imgArray[e]+'" title="'+t.titleArray[e]+'" alt="'+t.titleArray[e]+'" id="pgzoomimg'+e+'" class="pgzoomimg">'),$("#pgzoomimg"+e).load(function(){$(this).addClass("active")}))},zoomScroll:function(){var e=$("#pgprevious"),a=$("#pgnext"),o,l=!0;$("#pgzoomscroll").on("scroll",function(){currentScrollLeft=$(this).scrollLeft(),l===!0&&(l=!1,o=setTimeout(function(){if(0===currentScrollLeft?e.fadeOut():e.fadeIn(),currentScrollLeft>=(t.imgTotal-1)*t.winWidth?a.fadeOut():a.fadeIn(),currentScrollLeft%t.zoomScrollLeft>20||currentScrollLeft>0&&0===t.zoomScrollLeft){t.zoomScrollLeft=currentScrollLeft;var o=t.zoomScrollLeft/t.winWidth,i=Math.ceil(o),r=Math.floor(o);t.zoomImagesLoaded[i]||t.loadZoomImg(i),t.zoomImagesLoaded[r]||t.loadZoomImg(r)}l=!0},200))})},zoomKeyPress:function(){$(document).on("keyup","body",function(e){27==e.which?t.unloadZoom():37==e.which?t.prevNext("previous"):39==e.which&&t.prevNext("next")})},resizeZoom:function(){t.winWidth=$(window).width();var e=t.imgArray.length*t.winWidth;$("#pgzoom").width(e),$(".pgzoomslide").width(t.winWidth);var a=parseInt(t.zoomIdx*t.winWidth);$("#pgzoomscroll").scrollLeft(a)},unloadZoom:function(){$(document).off("keyup","body"),$(window).off("resize",t.resizeZoom),$("#pgzoomscroll").off("scroll"),$("#pgzoomview").fadeOut(function(){$("#pgzoom").empty(),$("#pgzoomview").off("keyup"),$("#pgzoomview").removeClass("fixed")})},prevNext:function(e){var a=$("#pgzoomscroll").scrollLeft()/t.winWidth;t.zoomIdx="previous"==e?Math.round(a)-1:Math.round(a)+1;var o=t.zoomIdx*t.winWidth;$("#pgzoomscroll").stop().animate({scrollLeft:o})}};$.extend(t,e),t.init()}}(jQuery);